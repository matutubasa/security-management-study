<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="情報セキュリティマネジメント試験（SG）の管理要素学習コンテンツ。セキュリティ体制、ポリシー策定、監査・評価などを詳しく解説。">
    <meta name="keywords" content="情報セキュリティ,管理要素,セキュリティ体制,ポリシー,監査,評価,SG試験">
    <title>管理要素 | 情報セキュリティマネジメント試験 学習サイト</title>
    
    <!-- Google Fonts for Japanese support -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/responsive.css">
    <link rel="stylesheet" href="../../assets/css/themes.css">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="../../manifest.json">
    <meta name="theme-color" content="#1976d2">
    
    <!-- Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="../../assets/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../../assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../../assets/images/favicon-16x16.png">
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-link">メインコンテンツへスキップ</a>
    
    <!-- Header with navigation -->
    <header class="header" role="banner">
        <nav class="nav-container" role="navigation" aria-label="メインナビゲーション">
            <div class="nav-brand">
                <a href="../../" class="brand-link" aria-label="ホームページへ戻る">
                    <img src="../../assets/images/logo.svg" alt="SG試験学習サイト" class="brand-logo">
                    <span class="brand-text">SG試験学習サイト</span>
                </a>
            </div>
            
            <!-- Mobile menu toggle -->
            <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu" aria-label="ナビゲーションメニューを開く">
                <span class="hamburger"></span>
                <span class="hamburger"></span>
                <span class="hamburger"></span>
            </button>
            
            <!-- Navigation menu -->
            <ul class="nav-menu" id="nav-menu" role="menubar">
                <li class="nav-item" role="none">
                    <a href="../../" class="nav-link" role="menuitem">ホーム</a>
                </li>
                <li class="nav-item" role="none">
                    <a href="../../exam-info/" class="nav-link" role="menuitem">試験情報</a>
                </li>
                <li class="nav-item nav-dropdown active" role="none">
                    <a href="../" class="nav-link active" role="menuitem" aria-haspopup="true" aria-expanded="false" aria-current="page">学習コンテンツ</a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="../basics/" role="menuitem">基礎知識</a></li>
                        <li><a href="./" role="menuitem" class="active">管理要素</a></li>
                        <li><a href="../technology/" role="menuitem">技術要素</a></li>
                        <li><a href="../laws/" role="menuitem">法規・制度</a></li>
                    </ul>
                </li>
                <li class="nav-item nav-dropdown" role="none">
                    <a href="../../practice/" class="nav-link" role="menuitem" aria-haspopup="true" aria-expanded="false">問題演習</a>
                    <ul class="dropdown-menu" role="menu">
                        <li><a href="../../practice/category/" role="menuitem">分野別問題</a></li>
                        <li><a href="../../practice/mock-exam/" role="menuitem">模擬試験</a></li>
                        <li><a href="../../practice/review/" role="menuitem">復習問題</a></li>
                    </ul>
                </li>
                <li class="nav-item" role="none">
                    <a href="../../glossary/" class="nav-link" role="menuitem">用語集</a>
                </li>
                <li class="nav-item" role="none">
                    <a href="../../progress/" class="nav-link" role="menuitem">学習進捗</a>
                </li>
                <li class="nav-item" role="none">
                    <a href="../../tips/" class="nav-link" role="menuitem">合格体験談</a>
                </li>
            </ul>
            
            <!-- Theme toggle and other utilities -->
            <div class="nav-utilities">
                <button class="theme-toggle" aria-label="ダークモード切り替え" title="ダークモード切り替え">
                    <span class="theme-icon"></span>
                </button>
                <button class="search-toggle" aria-label="検索を開く" title="検索">
                    <span class="search-icon"></span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Main content -->
    <main id="main-content" class="main-content" role="main">
        <!-- Page header -->
        <section class="page-header">
            <div class="container">
                <nav aria-label="パンくずリスト" class="breadcrumb">
                    <ol>
                        <li><a href="../../">ホーム</a></li>
                        <li><a href="../">学習コンテンツ</a></li>
                        <li aria-current="page">管理要素</li>
                    </ol>
                </nav>
                
                <div class="page-header-content">
                    <h1 class="page-title">
                        <span class="page-icon">🏢</span>
                        管理要素
                    </h1>
                    <p class="page-description">
                        情報セキュリティマネジメント体制の構築から運用まで、
                        組織的なセキュリティ管理の要素を体系的に学習します。
                    </p>
                </div>
                
                <div class="page-actions">
                    <a href="../../practice/category/?category=management" class="btn btn-primary">
                        🎯 管理問題を解く
                    </a>
                    <button id="bookmark-page" class="btn btn-outline" title="ページをブックマーク">
                        🔖 ブックマーク
                    </button>
                </div>
            </div>
        </section>

        <!-- Progress indicator -->
        <section class="study-progress" aria-labelledby="progress-title">
            <div class="container">
                <h2 id="progress-title" class="visually-hidden">学習進捗</h2>
                <div class="progress-container">
                    <div class="progress-info">
                        <span class="progress-label">管理要素の習得度</span>
                        <span class="progress-value" id="management-progress">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="management-progress-bar" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Table of contents -->
        <section class="table-of-contents" aria-labelledby="toc-title">
            <div class="container">
                <h2 id="toc-title">学習内容</h2>
                <div class="toc-grid">
                    <div class="toc-item">
                        <h3><a href="#security-governance">1. セキュリティガバナンス</a></h3>
                        <p>組織のセキュリティ統制と意思決定体制</p>
                        <div class="toc-meta">
                            <span class="difficulty normal">標準</span>
                            <span class="study-time">25分</span>
                        </div>
                    </div>
                    
                    <div class="toc-item">
                        <h3><a href="#policy-framework">2. セキュリティポリシー</a></h3>
                        <p>セキュリティポリシーの策定と運用</p>
                        <div class="toc-meta">
                            <span class="difficulty normal">標準</span>
                            <span class="study-time">30分</span>
                        </div>
                    </div>
                    
                    <div class="toc-item">
                        <h3><a href="#risk-management">3. リスクマネジメント</a></h3>
                        <p>情報セキュリティリスクの評価と対策</p>
                        <div class="toc-meta">
                            <span class="difficulty hard">応用</span>
                            <span class="study-time">35分</span>
                        </div>
                    </div>
                    
                    <div class="toc-item">
                        <h3><a href="#audit-evaluation">4. 監査・評価</a></h3>
                        <p>セキュリティ監査と効果測定</p>
                        <div class="toc-meta">
                            <span class="difficulty normal">標準</span>
                            <span class="study-time">25分</span>
                        </div>
                    </div>
                    
                    <div class="toc-item">
                        <h3><a href="#incident-management">5. インシデント管理</a></h3>
                        <p>セキュリティインシデントの対応体制</p>
                        <div class="toc-meta">
                            <span class="difficulty hard">応用</span>
                            <span class="study-time">30分</span>
                        </div>
                    </div>
                    
                    <div class="toc-item">
                        <h3><a href="#business-continuity">6. 事業継続計画</a></h3>
                        <p>BCPとディザスタリカバリ</p>
                        <div class="toc-meta">
                            <span class="difficulty normal">標準</span>
                            <span class="study-time">25分</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Study content -->
        <div class="study-content">
            <!-- Section 1: Security Governance -->
            <section id="security-governance" class="content-section" aria-labelledby="governance-title">
                <div class="container">
                    <div class="section-header">
                        <h2 id="governance-title" class="section-title">
                            <span class="section-number">1</span>
                            セキュリティガバナンス
                        </h2>
                        <div class="section-meta">
                            <span class="difficulty normal">標準</span>
                            <span class="study-time">⏱️ 25分</span>
                            <span class="importance high">★★★</span>
                        </div>
                    </div>

                    <div class="content-body">
                        <div class="concept-intro">
                            <h3>概要</h3>
                            <p>セキュリティガバナンスは、組織の経営陣がセキュリティリスクを統制し、適切な意思決定を行うための仕組みです。</p>
                        </div>

                        <div class="governance-structure">
                            <h3>🏢 ガバナンス体制</h3>
                            <div class="structure-hierarchy">
                                <div class="level ceo-level">
                                    <h4>経営層</h4>
                                    <ul>
                                        <li>CEO（最高経営責任者）</li>
                                        <li>CISO（最高情報セキュリティ責任者）</li>
                                        <li>取締役会</li>
                                    </ul>
                                    <p><strong>役割：</strong>セキュリティ戦略の決定、投資承認、全社的な方針決定</p>
                                </div>
                                
                                <div class="level management-level">
                                    <h4>管理層</h4>
                                    <ul>
                                        <li>情報セキュリティ委員会</li>
                                        <li>各部門セキュリティ責任者</li>
                                        <li>IT部門責任者</li>
                                    </ul>
                                    <p><strong>役割：</strong>ポリシー策定、リスク評価、対策の実装監督</p>
                                </div>
                                
                                <div class="level operational-level">
                                    <h4>実務層</h4>
                                    <ul>
                                        <li>セキュリティ担当者</li>
                                        <li>システム管理者</li>
                                        <li>一般従業員</li>
                                    </ul>
                                    <p><strong>役割：</strong>日常的なセキュリティ業務、ルールの遵守、インシデント報告</p>
                                </div>
                            </div>
                        </div>

                        <div class="governance-principles">
                            <h3>📋 ガバナンスの原則</h3>
                            <div class="principles-grid">
                                <div class="principle-item">
                                    <h4>🎯 方向性の明確化</h4>
                                    <p>セキュリティ目標と戦略の明確な設定</p>
                                </div>
                                <div class="principle-item">
                                    <h4>📊 リスクベースアプローチ</h4>
                                    <p>リスクの大きさに応じた適切な対策の実施</p>
                                </div>
                                <div class="principle-item">
                                    <h4>🔄 継続的改善</h4>
                                    <p>PDCAサイクルによる継続的な改善</p>
                                </div>
                                <div class="principle-item">
                                    <h4>👥 ステークホルダー関与</h4>
                                    <p>関係者全員の理解と協力の確保</p>
                                </div>
                            </div>
                        </div>

                        <div class="exam-tips">
                            <h3>📝 試験対策</h3>
                            <div class="tips-content">
                                <p><strong>重要ポイント：</strong></p>
                                <ul>
                                    <li>CISOの役割と責任範囲</li>
                                    <li>情報セキュリティ委員会の機能</li>
                                    <li>経営層のコミットメントの重要性</li>
                                    <li>ガバナンスとマネジメントの違い</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Study tools and actions -->
            <section class="study-tools" aria-labelledby="tools-title">
                <div class="container">
                    <h2 id="tools-title">学習サポート</h2>
                    <div class="tools-grid">
                        <div class="tool-item">
                            <div class="tool-icon">📝</div>
                            <h3>学習ノート</h3>
                            <p>重要なポイントをメモして復習に活用</p>
                            <button class="btn btn-outline" id="open-notes">ノートを開く</button>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">🎯</div>
                            <h3>練習問題</h3>
                            <p>管理要素の理解度を確認</p>
                            <a href="../../practice/category/?category=management" class="btn btn-primary">問題を解く</a>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">🔍</div>
                            <h3>用語検索</h3>
                            <p>わからない用語をすぐに調べる</p>
                            <a href="../../glossary/" class="btn btn-outline">用語集へ</a>
                        </div>
                        
                        <div class="tool-item">
                            <div class="tool-icon">📊</div>
                            <h3>学習進捗</h3>
                            <p>管理要素の習得状況を確認</p>
                            <a href="../../progress/" class="btn btn-outline">進捗を見る</a>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Navigation to next section -->
        <section class="content-navigation">
            <div class="container">
                <div class="nav-buttons">
                    <a href="../basics/" class="btn btn-outline nav-btn prev">
                        ← 基礎知識
                    </a>
                    <a href="../technology/" class="btn btn-primary nav-btn next">
                        技術要素 →
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Notes modal -->
    <div class="modal" id="notes-modal" aria-hidden="true" role="dialog" aria-labelledby="notes-title">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="notes-title">学習ノート - 管理要素</h3>
                <button class="modal-close" aria-label="ノートを閉じる">×</button>
            </div>
            <div class="modal-body">
                <textarea id="study-notes" placeholder="ここに重要なポイントや疑問点をメモしてください...

例：
- セキュリティガバナンスとマネジメントの違い
- ポリシー階層：基本ポリシー → 対策基準 → 実施手順
- リスク対応の4つの方法：軽減、受容、回避、転嫁
- ALE = SLE × ARO"></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="clear-notes">クリア</button>
                <button class="btn btn-primary" id="save-notes">保存</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>学習コンテンツ</h3>
                    <ul>
                        <li><a href="../basics/">基礎知識</a></li>
                        <li><a href="./">管理要素</a></li>
                        <li><a href="../technology/">技術要素</a></li>
                        <li><a href="../laws/">法規・制度</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>問題演習</h3>
                    <ul>
                        <li><a href="../../practice/category/">分野別問題</a></li>
                        <li><a href="../../practice/mock-exam/">模擬試験</a></li>
                        <li><a href="../../practice/review/">復習問題</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>サポート</h3>
                    <ul>
                        <li><a href="../../exam-info/">試験情報</a></li>
                        <li><a href="../../glossary/">用語集</a></li>
                        <li><a href="../../tips/">合格体験談</a></li>
                        <li><a href="../../progress/">学習進捗</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>このサイトについて</h3>
                    <p>情報セキュリティマネジメント試験（SG）の合格を支援する学習プラットフォームです。</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 情報セキュリティマネジメント試験学習サイト. All rights reserved.</p>
                <p class="footer-note">
                    ※このサイトはIPA（情報処理推進機構）とは関係ありません。学習支援を目的とした非公式サイトです。
                </p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="../../assets/js/storage.js"></script>
    <script src="../../assets/js/progress.js"></script>
    <script src="../../assets/js/main.js"></script>
    
    <!-- Study page specific script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize study page
            initStudyPage();
            
            // Load notes
            loadStudyNotes();
            
            // Track study time
            const startTime = Date.now();
            
            // Record study session when leaving
            window.addEventListener('beforeunload', function() {
                const studyTime = Date.now() - startTime;
                if (window.ProgressTracker && studyTime > 10000) {
                    window.ProgressTracker.recordStudySession(studyTime, 'management', ['governance', 'policy', 'risk-management', 'audit', 'incident', 'bcp']);
                }
            });
        });

        function initStudyPage() {
            // Bookmark functionality
            const bookmarkBtn = document.getElementById('bookmark-page');
            if (bookmarkBtn && window.StorageManager) {
                const isBookmarked = window.StorageManager.getBookmarks().some(b => b.pageId === 'study-management');
                updateBookmarkButton(bookmarkBtn, isBookmarked);
                
                bookmarkBtn.addEventListener('click', function() {
                    const isCurrentlyBookmarked = this.classList.contains('bookmarked');
                    window.StorageManager.toggleBookmark(
                        'study-management',
                        '管理要素 - 情報セキュリティマネジメント試験',
                        window.location.pathname
                    );
                    updateBookmarkButton(this, !isCurrentlyBookmarked);
                });
            }

            // Notes modal
            initNotesModal();
            
            // Progress tracking
            updateProgressDisplay();
            
            // Section completion tracking
            trackSectionProgress();
        }

        function updateBookmarkButton(button, isBookmarked) {
            if (isBookmarked) {
                button.classList.add('bookmarked');
                button.innerHTML = '🔖 ブックマーク済み';
                button.title = 'ブックマークを削除';
            } else {
                button.classList.remove('bookmarked');
                button.innerHTML = '🔖 ブックマーク';
                button.title = 'ページをブックマーク';
            }
        }

        function initNotesModal() {
            const modal = document.getElementById('notes-modal');
            const openBtn = document.getElementById('open-notes');
            const closeBtn = modal.querySelector('.modal-close');
            const overlay = modal.querySelector('.modal-overlay');
            const saveBtn = document.getElementById('save-notes');
            const clearBtn = document.getElementById('clear-notes');
            const textarea = document.getElementById('study-notes');

            openBtn.addEventListener('click', () => openModal(modal));
            closeBtn.addEventListener('click', () => closeModal(modal));
            overlay.addEventListener('click', () => closeModal(modal));
            
            saveBtn.addEventListener('click', () => {
                saveStudyNotes(textarea.value);
                closeModal(modal);
                showNotification('ノートを保存しました', 'success');
            });
            
            clearBtn.addEventListener('click', () => {
                if (confirm('ノートの内容をクリアしますか？')) {
                    textarea.value = '';
                }
            });
        }

        function openModal(modal) {
            modal.style.display = 'block';
            modal.setAttribute('aria-hidden', 'false');
            document.body.style.overflow = 'hidden';
            
            // Focus on textarea
            const textarea = modal.querySelector('textarea');
            if (textarea) textarea.focus();
        }

        function closeModal(modal) {
            modal.style.display = 'none';
            modal.setAttribute('aria-hidden', 'true');
            document.body.style.overflow = '';
        }

        function loadStudyNotes() {
            if (window.StorageManager) {
                const notes = window.StorageManager.getNote('study-management');
                if (notes) {
                    document.getElementById('study-notes').value = notes.text;
                }
            }
        }

        function saveStudyNotes(noteText) {
            if (window.StorageManager) {
                window.StorageManager.saveNote('study-management', noteText);
            }
        }

        function updateProgressDisplay() {
            if (window.StorageManager) {
                const studyData = window.StorageManager.getStudyData();
                const progress = studyData.progress?.management || 0;
                
                const progressValue = document.getElementById('management-progress');
                const progressBar = document.getElementById('management-progress-bar');
                
                if (progressValue) progressValue.textContent = `${progress}%`;
                if (progressBar) progressBar.style.width = `${progress}%`;
            }
        }

        function trackSectionProgress() {
            // Track which sections have been viewed
            const sections = document.querySelectorAll('.content-section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
                        const sectionId = entry.target.id;
                        markSectionViewed(sectionId);
                    }
                });
            }, { threshold: 0.5 });

            sections.forEach(section => observer.observe(section));
        }

        function markSectionViewed(sectionId) {
            if (window.StorageManager) {
                const studyData = window.StorageManager.getStudyData();
                if (!studyData.viewedSections) studyData.viewedSections = {};
                if (!studyData.viewedSections.management) studyData.viewedSections.management = [];
                
                if (!studyData.viewedSections.management.includes(sectionId)) {
                    studyData.viewedSections.management.push(sectionId);
                    window.StorageManager.updateStudyData({ viewedSections: studyData.viewedSections });
                    
                    // Update progress
                    const totalSections = 6; // governance, policy, risk-management, audit, incident, bcp
                    const viewedSections = studyData.viewedSections.management.length;
                    const newProgress = Math.min(100, Math.round((viewedSections / totalSections) * 100));
                    
                    if (newProgress > (studyData.progress?.management || 0)) {
                        studyData.progress = studyData.progress || {};
                        studyData.progress.management = newProgress;
                        window.StorageManager.updateStudyData({ progress: studyData.progress });
                        updateProgressDisplay();
                    }
                }
            }
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }
    </script>
</body>
</html>